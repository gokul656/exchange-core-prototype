package org.malware;

import org.malware.order.Order;
import org.malware.order.OrderType;
import org.malware.orderbook.OrderBook;

import java.math.BigInteger;
import java.util.UUID;

public class MainApplication {

    private OrderBook orderBook = new OrderBook();

    public static void main(String[] args) {
        MainApplication mainApplication = new MainApplication();

        mainApplication.addBuyOrder(0);
        mainApplication.addBuyOrder(100000);
        mainApplication.addSellOrder();

        mainApplication.orderBook.getBuyOrders().forEach(
                it -> System.out.println("BUY  :: ORDER ID : " + it.currentOrder.getId())
        );

        mainApplication.orderBook.getSellOrders().forEach(
                it -> System.out.println("SELL :: ORDER ID : " + it.currentOrder.getId())
        );

        mainApplication.orderBook.getBids().forEach(
                it -> System.out.println(it.price)
        );
    }

    private void addBuyOrder(int price) {
        orderBook.addOrder(Order.builder()
                .id(UUID.randomUUID().toString())
                .orderType(OrderType.BUY)
                .price(new BigInteger(price == 0 ? "10" : String.valueOf(price)))
                .build());
    }

    private void addSellOrder() {
        orderBook.addOrder(Order.builder()
                .id(UUID.randomUUID().toString())
                .orderType(OrderType.SELL)
                .price(new BigInteger("10"))
                .build());
    }
}